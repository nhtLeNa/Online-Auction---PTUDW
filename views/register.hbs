<link rel="stylesheet" href="/assets/css/login-screen.css">

<main>
    <div id="logreg-forms">
        <form class="form-signup" method="POST">
            <div class="social-login">
                <button class="btn facebook-btn social-btn" type="button"><span><i class="fab fa-facebook-f"></i> Sign
                        up with
                        Facebook</span> </button>
            </div>
            <div class="social-login">
                <button class="btn google-btn social-btn" type="button"><span><i class="fab fa-google-plus-g"></i> Sign
                        up with
                        Google+</span> </button>
            </div>

            <p style="text-align:center">OR</p>

            <input type="text" name="register_name" class="form-control" placeholder="Full name" required=""
                autofocus="" value="{{name}}">
            <input type="email" name="register_email" class="form-control" placeholder="Email address" required
                autofocus="" value="{{email}}">
            <p id="error" class="d-none">{{error}}</p>
            <input type="password" name="register_password" class="form-control" placeholder="Password" required
                autofocus="" value="{{password}}">
            <input type="password" name="register_repeatpassword" class="form-control" placeholder="Repeat Password"
                required autofocus="" value="{{repeat}}">

            <button class="btn btn-primary btn-block" type="submit"><i class="fas fa-user-plus"></i> Sign Up</button>
            <a href="/account/login" id="cancel_signup"><i class="fas fa-angle-left"></i> Back</a>
        </form>
        <br>
    </div>
</main>

<script>
    $('#logreg-forms .form-signup').toggle();
    var password = document.getElementsByName("register_password")[0];
    var repeat = document.getElementsByName("register_repeatpassword")[0];
    var email = document.getElementsByName("register_email")[0];
    if (document.getElementById("error").innerHTML) {
        email.setCustomValidity(document.getElementById("error").innerHTML);
        email.reportValidity();
    }

    function Default() {
         if (email.value == "") {
            email.setCustomValidity("Please fill out this field.");
        }else {
            email.setCustomValidity('');
        }
    }

    function ValidatePassword() {
        if (repeat.value == "") {
            repeat.setCustomValidity("Please fill out this field.");
            repeat.reportValidity();
        }
        else if (password.value != repeat.value) {
            repeat.setCustomValidity("Passwords don't match");
            repeat.reportValidity();
        } else {
            repeat.setCustomValidity('');
        }
    }
    password.onchange = ValidatePassword;
    email.onchange = Default;
    repeat.onkeyup = ValidatePassword;
</script>